{
  "url": "https://docs.cloud.google.com/vertex-ai/generative-ai/docs/model-reference/code-execution-api",
  "title": "Execute code with the Gemini API  |  Generative AI on Vertex AI  |  Google Cloud Documentation",
  "text_content": "Home\nTechnology areas\nGenerative AI on Vertex AI\nDocumentation\nAPI reference\nSend feedback\nExecute code with the Gemini API\nStay organized with collections\nSave and categorize content based on your preferences.\nThe Gemini API code execution feature enables the model to generate and run\nPython code and learn iteratively from the results until it arrives at a final\noutput. You can use this code execution capability to build applications that\nbenefit from code-based reasoning and that produce text output. For example,\nyou could use code execution in an application that solves equations or\nprocesses text.\nThe Gemini API provides code execution as a tool, similar to\nfunction calling\n. After\nyou add code execution as a tool, the model decides when to use it.\nSupported models\nGemini 2.5 Flash\n(Preview)\nGemini 2.5 Flash-Lite\n(Preview)\nGemini 2.5 Flash-Lite\nGemini 2.0 Flash with Live API\n(Preview)\nGemini 2.5 Pro\nGemini 2.5 Flash\nGemini 2.0 Flash\nLimitations\nThe feature doesn't support file I/O.\nCode execution can run for a maximum of 30 seconds before timing out.\nExample syntax\ncurl\nPROJECT_ID\n=\nmyproject\nREGION\n=\nus-central1\nMODEL_ID\n=\ngemini-2.0-flash-001\nhttps://\n${\nREGION\n}\n-aiplatform.googleapis.com/v1/projects/\n${\nPROJECT_ID\n}\n/locations/\n${\nREGION\n}\n/publishers/google/models/\n${\nMODEL_ID\n}\n:generateContent\n\\\n-d\n'{\n\"contents\": [{\n...\n}],\n\"tools\": [{\n\"code_execution\":  {}\n}]\n}'\nParameter list\nSee\nexamples\nfor implementation details.\nPython\nTo enable code execution, specify a code execution\ntool\nin your request.\nCodeExecution\nTool that executes code generated by the model, and automatically returns the result to the model. See also\nExecutableCode\nand\nCodeExecutionResult\nwhich are input and output to this tool.\nPart\nexecutable_code\nOptional:\nExecutableCode\nCode generated by the model that is meant to be executed.\nSee Code Execution [API].\ncode_execution_result\nOptional:\nCodeExecutionResult\nResult of executing the [ExecutableCode].\nSee Code Execution [API].\nExecutableCode\nlanguage\nRequired:\nstring (enum)\nSupported programming languages for the generated\ncode\n.\nSupported:\nPYTHON\ncode\nRequired:\nstring\nThe code to be executed.\nSee Code Execution [API].\nCodeExecutionResult\noutcome\nRequired:\nstring (enum)\nOutcome of the code execution.\nPossible outcomes:\nCode execution completed successfully. (\nOUTCOME_OK\n)\nCode execution finished but with a failure.\nstderr\nshould contain the reason. (\nOUTCOME_FAILED\n)\nCode execution ran for too long, and was cancelled. There may or may not be a partial output present. (\nOUTCOME_DEADLINE_EXCEEDED\n)\noutput\nRequired:\nstring\nContains\nstdout\nwhen code execution is successful,\nstderr\nor other description otherwise.\nSee Code Execution [API].\nExamples\nHere are illustrations of how you can submit a query and function declarations to the model.\nBasic use case\ncurl\nPROJECT_ID\n=\nmyproject\nREGION\n=\nus-central1\nMODEL_ID\n=\ngemini-2.0-flash-001\ncurl\n-X\nPOST\n\\\n-H\n\"Authorization: Bearer\n$(\ngcloud\nauth\nprint-access-token\n)\n\"\n\\\n-H\n\"Content-Type: application/json\"\n\\\nhttps://\n${\nREGION\n}\n-aiplatform.googleapis.com/v1/projects/\n${\nPROJECT_ID\n}\n/locations/\n${\nREGION\n}\n/publishers/google/models/\n${\nMODEL_ID\n}\n:generateContent\n\\\n-d\n'{\n\"contents\": [{\n\"role\": \"user\",\n\"parts\": [{\n\"text\": \"Calculate 20th fibonacci number. Then find the nearest palindrome to it.\"\n}]\n}],\n\"tools\": [{'\ncodeExecution\n': {}}],\n}'\nPython\nfrom\ngoogle\nimport\ngenai\nfrom\ngoogle.genai.types\nimport\nTool\n,\nToolCodeExecution\n,\nGenerateContentConfig\nclient\n=\ngenai\n.\nClient\n()\nmodel_id\n=\n\"gemini-2.0-flash-001\"\ncode_execution_tool\n=\nTool\n(\ncode_execution\n=\nToolCodeExecution\n()\n)\nresponse\n=\nclient\n.\nmodels\n.\ngenerate_content\n(\nmodel\n=\nmodel_id\n,\ncontents\n=\n\"Calculate 20th fibonacci number. Then find the nearest palindrome to it.\"\n,\nconfig\n=\nGenerateContentConfig\n(\ntools\n=\n[\ncode_execution_tool\n],\ntemperature\n=\n0\n,\n),\n)\nfor\npart\nin\nresponse\n.\ncandidates\n[\n0\n]\n.\ncontent\n.\nparts\n:\nif\npart\n.\nexecutable_code\n:\nprint\n(\npart\n.\nexecutable_code\n)\nif\npart\n.\ncode_execution_result\n:\nprint\n(\npart\n.\ncode_execution_result\n)\n# Example response:\n# code='...' language='PYTHON'\n# outcome='OUTCOME_OK' output='The 20th Fibonacci number is: 6765\\n'\n# code='...' language='PYTHON'\n# outcome='OUTCOME_OK' output='Lower Palindrome: 6666\\nHigher Palindrome: 6776\\nNearest Palindrome to 6765: 6776\\n'\nEnable code execution on the model\nTo enable basic code execution, see\nCode execution\n.\nWhat's next\nLearn more about the\nGemini\nAPI\n.\nLearn more about\nFunction\ncalling\n.\nLearn more about\nGenerating content with Gemini\n.\nSend feedback\nExcept as otherwise noted, the content of this page is licensed under the\nCreative Commons Attribution 4.0 License\n, and code samples are licensed under the\nApache 2.0 License\n. For details, see the\nGoogle Developers Site Policies\n. Java is a registered trademark of Oracle and/or its affiliates.\nLast updated 2025-11-07 UTC.",
  "metadata": {
    "title": "Execute code with the Gemini API  |  Generative AI on Vertex AI  |  Google Cloud Documentation",
    "extracted_at": "2025-11-11 14:25:59"
  }
}